<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                    xmlns:not_win="http://uno.ui/not_win"
                    xmlns:win="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:smtx="using:ShowMeTheXAML"
                    mc:Ignorable="not_win">

    <!-- "See Xaml" flyout button style (self-contained, no Material dependency) -->
    <Style x:Key="SeeXamlFlyoutButtonStyle"
           TargetType="Button">
        <Setter Property="Tag"
                Value="See Xaml" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid>
                        <Button Content="{TemplateBinding Tag}"
                                FontSize="10"
                                Style="{StaticResource TextButtonStyle}">
                            <Button.Flyout>
                                <Flyout Placement="LeftEdgeAlignedBottom">
                                    <Flyout.FlyoutPresenterStyle>
                                        <Style TargetType="FlyoutPresenter">
                                            <Setter Property="ScrollViewer.HorizontalScrollMode"
                                                    Value="Disabled" />
                                            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility"
                                                    Value="Disabled" />
                                            <Setter Property="ScrollViewer.VerticalScrollMode"
                                                    Value="Disabled" />
                                            <Setter Property="ScrollViewer.VerticalScrollBarVisibility"
                                                    Value="Disabled" />
                                            <Setter Property="MinHeight"
                                                    Value="0" />
                                            <Setter Property="MinWidth"
                                                    Value="0" />
                                            <Setter Property="Padding"
                                                    Value="0,0,0,2" />
                                            <Setter Property="Margin"
                                                    not_win:Value="40,100,40,40"
                                                    win:Value="40,0,40,0" />
                                        </Style>
                                    </Flyout.FlyoutPresenterStyle>

                                    <ScrollViewer HorizontalScrollMode="Enabled"
                                                  HorizontalScrollBarVisibility="Visible"
                                                  VerticalScrollMode="Enabled"
                                                  VerticalScrollBarVisibility="Visible">
                                        <TextBlock Text="{TemplateBinding Content}"
                                                   FontFamily="Consolas, Courier New, monospace"
                                                   FontSize="12"
                                                   IsTextSelectionEnabled="True"
                                                   Margin="16" />
                                    </ScrollViewer>
                                </Flyout>
                            </Button.Flyout>
                        </Button>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <smtx:NiceFormatter x:Key="NiceFormatter" />

    <!-- Base style -->
    <Style x:Key="BaseXamlDisplayStyle"
           TargetType="smtx:XamlDisplay">
        <Setter Property="Margin" Value="0,10,0,0" />
        <Setter Property="Formatter" Value="{StaticResource NiceFormatter}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="smtx:XamlDisplay">
                    <StackPanel Orientation="Horizontal">
                        <ContentPresenter Content="{TemplateBinding Content}" />
                        <Button Content="{TemplateBinding Xaml}"
                                Style="{StaticResource SeeXamlFlyoutButtonStyle}" />
                    </StackPanel>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- On-the-side layout (content + button horizontal) -->
    <Style x:Key="XamlDisplayOnTheSideStyle"
           BasedOn="{StaticResource BaseXamlDisplayStyle}"
           TargetType="smtx:XamlDisplay">
        <Setter Property="Padding" Value="5,0,0,0" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="smtx:XamlDisplay">
                    <StackPanel Orientation="Horizontal">
                        <ContentPresenter Content="{TemplateBinding Content}" />
                        <Button Content="{TemplateBinding Xaml}"
                                Margin="{TemplateBinding Padding}"
                                Style="{StaticResource SeeXamlFlyoutButtonStyle}" />
                    </StackPanel>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Below layout (content + button vertical) -->
    <Style x:Key="XamlDisplayBelowStyle"
           BasedOn="{StaticResource BaseXamlDisplayStyle}"
           TargetType="smtx:XamlDisplay">
        <Setter Property="Padding" Value="0,5,0,0" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="smtx:XamlDisplay">
                    <StackPanel Orientation="Vertical">
                        <ContentPresenter Content="{TemplateBinding Content}" />
                        <Button Content="{TemplateBinding Xaml}"
                                Margin="{TemplateBinding Padding}"
                                Style="{StaticResource SeeXamlFlyoutButtonStyle}" />
                    </StackPanel>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Default implicit style -->
    <Style TargetType="smtx:XamlDisplay"
           BasedOn="{StaticResource XamlDisplayBelowStyle}" />

    <!-- XamlPresenter default -->
    <Style x:Key="DefaultXamlPresenterStyle"
           TargetType="smtx:XamlPresenter">
        <Setter Property="Formatter" Value="{StaticResource NiceFormatter}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="smtx:XamlPresenter">
                    <Button Content="{TemplateBinding Xaml}"
                            Style="{StaticResource SeeXamlFlyoutButtonStyle}" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="smtx:XamlPresenter"
           BasedOn="{StaticResource DefaultXamlPresenterStyle}" />

</ResourceDictionary>
